<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="description" content="F5 BIG-IP Virtual Edition Deployment Guide on AWS">
<meta name="keywords" content="Partner Solution, AWS, F5 BIG-IP Virtual Edition">
<title>F5 BIG-IP Virtual Edition on AWS</title>
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#34478c;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{
  border-bottom:1px solid #e7e7e9;
  padding-bottom:.5em;
  width: 230px;
}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{
  font-family: "Work Sans", "Helvetica", "Tahoma", "Geneva", "Arial", sans-serif;
  text-decoration:none;
  color:#ccc;
  display: block;
  font-size:1rem;
  line-height: 2rem;
}
#toc a:hover{color:#e6e6e6}
#toc a:active{
  text-decoration:none;
  color:#777;
}
#toctitle{
  padding-top:0;
  overflow:hidden;
  background:#283e5b;
  /* border-bottom: 4px solid #435c7c; */
  width:320px;
  height:154px;
  top:0;
  left:0;
  color: #283e5b;
}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#1c222a;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;/*! padding:1.25em 1em; */height:100%;overflow:auto;padding-right: 0px;}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{
  font-size:1.375em;
  background-repeat: no-repeat;
  background-size: 160.8px 136.483px;
  background-position: center;
  }
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:#1c222a;padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44;/*! background: #e6e6e6; */}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";color: rgb(3, 87, 21);}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}

/* -------------------------   QS CSS entries ---------------------------- */
@font-face {
  font-family: 'Amazon Ember Light';
  src        :
    local('Amazon Ember Light'),
    local('AmazonEmberLight'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_lt-019e0ec3f9b521056e66e31fdcbc8323e5cd1938._V299195751_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_lt-bc9ed0fce860a46f3cb061034280c23400e6e8b6._V299195751_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Light';
  font-weight: 700;
  src        :
    local('Amazon Ember Light'),
    local('AmazonEmberLight-Bold'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-46b91bda68161c14e554a779643ef4957431987b._V2_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-b605252f87b8b3df5ae206596dac0938fc5888bc._V2_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Light';
  font-style : italic;
  src        :
    local('Amazon Ember Light'),
    local('AmazonEmberLight-Italic'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_ltit-96be47a559388a2b219577124589435c09a361fe._V299195751_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_ltit-b561f11b5c8be92ac17f6b713dd9d4b6e2f00c8d._V299195751_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Light';
  font-style : italic;
  font-weight: 700;
  src        :
    local('Amazon Ember Light'),
    local('AmazonEmberLight-BoldItalic'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_ltit-96be47a559388a2b219577124589435c09a361fe._V299195751_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_ltit-b561f11b5c8be92ac17f6b713dd9d4b6e2f00c8d._V299195751_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Regular';
  src        :
    local('Amazon Ember Regular'),
    local('AmazonEmberRegular'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_rg-fd81bacb6a659a8c8c95828226b74594ab985060._V299195749_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_rg-0acf3bc8b64d470d8888d84741a19533394654c6._V299195749_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Regular';
  font-weight: 700;
  src        :
    local('Amazon Ember Regular'),
    local('AmazonEmberRegular-Bold'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-46b91bda68161c14e554a779643ef4957431987b._V2_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-b605252f87b8b3df5ae206596dac0938fc5888bc._V2_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Regular';
  font-style : italic;
  src        :
    local('Amazon Ember Regular'),
    local('AmazonEmberRegular-Italic'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_rgit-af980fe9c64fc17ece72cba4e3e7fdf54babeea6._V299195748_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_rgit-4fae4842b3446774d86579b9b024858a848644e8._V299195748_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Regular';
  font-style : italic;
  font-weight: 700;
  src        :
    local('Amazon Ember Regular'),
    local('AmazonEmberRegular-BoldItalic'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bdit-80ff7aba37dd1ff5a6b90233a19e3a780a96dc2f._V2_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bdit-57598ce426a612be5a1d15eee08252668fca5e7a._V2_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Medium';
  src        :
    local('Amazon Ember Medium'),
    local('AmazonEmberMedium'),
    url('https://m.media-amazon.com/images/G/01/amazonservices/fonts/amazonember_md_base-webfont._V525237381_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/amazonservices/fonts/amazonember_md_base-webfont._V525237386_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Medium';
  font-weight: 700;
  src        :
    local('Amazon Ember Medium'),
    local('AmazonEmberMedium-Bold'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-46b91bda68161c14e554a779643ef4957431987b._V2_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-b605252f87b8b3df5ae206596dac0938fc5888bc._V2_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Medium';
  font-style : italic;
  src        :
    local('Amazon Ember Medium'),
    local('AmazonEmberMedium-Italic'),
    url('https://m.media-amazon.com/images/G/01/agdm/fonts/amazonember/amazonember_mdit-webfont._V522331917_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/agdm/fonts/amazonember/amazonember_mdit-webfont._V522331917_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Medium';
  font-style : italic;
  font-weight: 700;
  src        :
    local('Amazon Ember Medium'),
    local('AmazonEmberMedium-BoldItalic'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bdit-80ff7aba37dd1ff5a6b90233a19e3a780a96dc2f._V2_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bdit-57598ce426a612be5a1d15eee08252668fca5e7a._V2_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Heavy';
  src        :
    local('Amazon Ember Heavy'),
    local('AmazonEmberHeavy'),
    url('https://m.media-amazon.com/images/G/01/acs/fonts/amazonember_he-webfont._V278446113_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/acs/fonts/amazonember_he-webfont._V278446115_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Heavy';
  font-weight: 700;
  src        :
    local('Amazon Ember Heavy'),
    local('AmazonEmberHeavy-Bold'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-46b91bda68161c14e554a779643ef4957431987b._V2_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-b605252f87b8b3df5ae206596dac0938fc5888bc._V2_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Heavy';
  font-style : italic;
  src        :
    local('Amazon Ember Heavy'),
    local('AmazonEmberHeavy-Italic'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bdit-80ff7aba37dd1ff5a6b90233a19e3a780a96dc2f._V2_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bdit-57598ce426a612be5a1d15eee08252668fca5e7a._V2_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Heavy';
  font-style : italic;
  font-weight: 700;
  src        :
    local('Amazon Ember Heavy'),
    local('AmazonEmberHeavy-BoldItalic'),
    url('https://m.media-amazon.com/images/G/01/agdm/fonts/amazonember/amazonember_heit-webfont._V522331917_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/agdm/fonts/amazonember/amazonember_heit-webfont._V522331917_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Thin';
  src        :
    local('Amazon Ember Thin'),
    local('AmazonEmberThin'),
    url('https://m.media-amazon.com/images/G/01/mobile-apps/devportal2/content/alexa/prize/20160810/fonts/AmazonEmber/amazonember-thin-webfont._V282715032_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/mobile-apps/devportal2/content/alexa/prize/20160810/fonts/AmazonEmber/amazonember-thin-webfont._V282715033_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Thin';
  font-weight: 700;
  src        :
    local('Amazon Ember Thin'),
    local('AmazonEmberThin-Bold'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-46b91bda68161c14e554a779643ef4957431987b._V2_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bd-b605252f87b8b3df5ae206596dac0938fc5888bc._V2_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Thin';
  font-style : italic;
  src        :
    local('Amazon Ember Thin'),
    local('AmazonEmberThin-Italic'),
    url('https://m.media-amazon.com/images/G/01/mobile-apps/devportal2/content/alexa/prize/20160810/fonts/AmazonEmber/amazonember-thinit-webfont._V282715033_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/mobile-apps/devportal2/content/alexa/prize/20160810/fonts/AmazonEmber/amazonember-thinit-webfont._V282715032_.woff') format('woff');
}

@font-face {
  font-family: 'Amazon Ember Thin';
  font-style : italic;
  font-weight: 700;
  src        :
    local('Amazon Ember Thin'),
    local('AmazonEmberThin-BoldItalic'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bdit-80ff7aba37dd1ff5a6b90233a19e3a780a96dc2f._V2_.woff2') format('woff2'),
    url('https://m.media-amazon.com/images/G/01/AUIClients/AmazonUIBaseCSS-amazonember_bdit-57598ce426a612be5a1d15eee08252668fca5e7a._V2_.woff') format('woff');
}


.tip {
  border-top: 30px solid rgba(92, 184, 92, 0.8);
  background: #E6F9E6;
}

.note {
  border-top: 30px solid #6AB0DE;
  background: #E7F2FA;
}

.warning {
  border-top: 30px solid #F0B37E;
  background: #FFF2DB;
}

.caution {
  border-top: 30px solid rgba(217, 83, 79, 0.8);
  background: #FAE2E2;
}

.important {
  border-top: 30px solid rgba(217, 83, 79, 0.8);
  background: #FAE2E2;
}

#content {
  max-width: 100rem;
  padding-left: 5rem;
  padding-right: 5rem;
}

body {
  font-family: "Amazon Ember Regular", "Helvetica", "Tahoma", "Geneva", "Arial", sans-serif;
}

/* added */
h1,
h2,
h3,
h4,
h5,
h6 {
  margin        : 0.85rem 0 1.7rem 0;
  text-rendering: optimizeLegibility;
  color: #ec7211;
}

p {
  margin: 1rem 0;
}

/* QS Table of Contents */

#toc {
  overflow-x: hidden !important;
}

#toc>ul li {
  padding    : 0.3rem 0.6rem;
  margin-top : 0;
  line-height: 1;
}

#toc>ul li a {
  line-height: 1.6;
}

#toc a {
  /* TOC details */
  font-family  : "Amazon Ember Light", "Helvetica", "Tahoma", "Geneva", "Arial", sans-serif;
  margin-left  : -1rem;
  margin-right : -1rem;
  padding-left : 1rem;
  padding-right: 1rem;
  background   : transparent;
  box-sizing   : border-box;
  cursor       : pointer;
  font-weight  : 300 !important;
}

/* image layout */
#toc.toc2 #toctitle {
  background-image: url("docs/boilerplate/.images/AWS-Logo.svg");
  background-repeat: no-repeat;
  background-size: 50%;
  background-position: center;
  width: auto;
  height: 15%;
}

/* Left Navbar size */
#toc.toc2 {
  width: 17%;
  min-width: 15em;
}

/* auto width for main page */
body.toc2 {
  padding-left: 22%;
  padding-right: 2%;
}

/* hide left nav bar if page size is smaller than 767px */
@media screen and (max-width: 767px) {
  #toc {
      display: none !important;
  }
  body.toc2 {
    padding-left: 1%;
    padding-right: 1%;
    position: relative;
  }

  #content {
    padding-left: 2%;
    padding-right: 2%;
  }
}

/* QS Tables */

table.tableblock .title,
.imageblock .title {
  font-family  : "Amazon Ember Light", "Helvetica", "Tahoma", "Geneva", "Arial", sans-serif;
  font-size: 1.1rem;
  color: #34478c;
}
table p {
  margin: 0rem;
}

/* Add border around hyperlink images */
a img {
    border: 1px solid #A4A4A4;
}

.preview_mode {
	border-color:#e0e0dc;
	-webkit-box-shadow:0 1px 4px #e0e0dc;
	box-shadow:0 1px 4px #e0e0dc;
  background:#ffffb3;
  padding-bottom: 2rem;
}
.preview_mode .tableblock {
  background:#ffffb3;
}

.watermark {
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  color:#00f;
  cursor: default;
  display: block;
  font-size: 400px;
  font-weight: 1000;
  margin: 0;
  opacity:0.05;
  top: 30%;
  position: fixed;
  text-align: center;
  transform: rotate(-30deg);
  user-select: none;
  z-index: -1;
}

.footer-text{color:rgba(255,255,255,.8);line-height:1.44;background:#1c222a;padding:1.25em;max-width:100%;margin-bottom:unset}
p.footer-text a{color:#d7d8d8}

/* This is for the 'dummy' image in the docs to help with reporting on guide views. */
/* DO NOT MODIFY */
.image-container img {
  width: 1px;
  height: 1px;
  }
/* END dummy image */

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_overview">Overview</a></li>
<li><a href="#_costs_and_licenses">Costs and licenses</a></li>
<li><a href="#_architecture">Architecture</a></li>
<li><a href="#_deployment_options">Deployment options</a></li>
<li><a href="#_predeployment_steps">Predeployment steps</a>
<ul class="sectlevel2">
<li><a href="#_subscribe_to_the_big_ip_ve_ami">Subscribe to the BIG-IP VE AMI</a></li>
<li><a href="#_prepare_your_aws_account">Prepare your AWS account</a></li>
<li><a href="#_customize_the_big_ip_ve_configuration">Customize the BIG-IP VE configuration</a></li>
</ul>
</li>
<li><a href="#_deployment_steps">Deployment steps</a></li>
<li><a href="#_postdeployment_steps">Postdeployment steps</a>
<ul class="sectlevel2">
<li><a href="#_access_the_big_ip_ve_ip_address">Access the BIG-IP VE IP address</a></li>
<li><a href="#_test_the_waf_service">Test the WAF service</a></li>
<li><a href="#_test_the_failover">Test the failover</a></li>
</ul>
</li>
<li><a href="#_best_practices_for_using_big_ip_ve_on_aws">Best practices for using BIG-IP VE on AWS</a>
<ul class="sectlevel2">
<li><a href="#_add_services_via_the_cloud">Add services via the cloud</a></li>
<li><a href="#_add_services_via_big_ip_ve">Add services via BIG-IP VE</a></li>
</ul>
</li>
<li><a href="#_delete_the_deployment">Delete the deployment</a></li>
<li><a href="#_security">Security</a>
<ul class="sectlevel2">
<li><a href="#_onboarding">Onboarding</a></li>
<li><a href="#_operation">Operation</a></li>
</ul>
</li>
<li><a href="#_troubleshooting">Troubleshooting</a>
<ul class="sectlevel2">
<li><a href="#_support">Support</a></li>
<li><a href="#_resources">Resources</a></li>
</ul>
</li>
<li><a href="#_customer_responsibility">Customer responsibility</a></li>
<li><a href="#_feedback">Feedback</a></li>
<li><a href="#_notices">Notices</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<h2 id="_f5_big_ip_virtual_edition_on_aws" class="discrete text-center">F5 BIG-IP Virtual Edition on AWS</h2>
<h2 id="_partner_solution_deployment_guide" class="discrete text-left text-center">Partner Solution Deployment Guide</h2>
<div class="imageblock text-center">
<div class="content">
<img src="https://aws-quickstart.s3.amazonaws.com/docs/deployment-guide/aws-quickstart-deployment-graphic.png" alt="QS" width="80" height="80">
</div>
</div>
<div class="paragraph text-center">
<p><strong>June 2022</strong><br>
<em>Alex Applebaum, Greg Crosby, Andrey Kashcheev, Nitin Khanna, Yossi Rosenboim, Michael Shimkus, F5</em><br>
<em>Andrew Glenn and Troy Ameigh, AWS Integration and Automation team</em><br></p>
</div>
<div class="imageblock text-left image-container">
<div class="content">
<img src="https://aws-quickstart.s3.amazonaws.com/cfn-ps-f5-big-ip-virtual-edition-ha/docs/boilerplate/.images/aws-quickstart-graphic.png" alt="">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Refer to the <a href="https://github.com/aws-ia/cfn-ps-f5-big-ip-virtual-edition-ha" target="_blank" rel="noopener">GitHub repository</a> to view source files, report bugs, submit feature ideas, and post feedback about this Partner Solution. To comment on the documentation, refer to <a href="#_feedback">Feedback</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph text-left">
<p>This Partner Solution was created by F5 in collaboration with Amazon Web Services (AWS). <a href="https://aws.amazon.com/solutions/partners/" target="_blank" rel="noopener">Partner Solutions</a> are automated reference deployments that help people deploy popular technologies on AWS according to AWS best practices. If you&#8217;re unfamiliar with AWS Partner Solutions, refer to the <a href="https://fwd.aws/rA69w?" target="_blank" rel="noopener">AWS Partner Solution General Information Guide</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This Partner Solution deploys F5 BIG-IP Virtual Edition on the AWS Cloud. If you are unfamiliar with AWS Partner Solutions, refer to the <a href="https://fwd.aws/rA69w?" target="_blank" rel="noopener">AWS Partner Solution General Information Guide</a>.</p>
</div>
<div class="paragraph">
<p>This deployment guide discusses architectural considerations and configuration steps for deploying a failover cluster of BIG-IP VE instances on the Amazon Web Services (AWS) Cloud. It also provides links for launching AWS CloudFormation templates that automate the deployment.</p>
</div>
<div class="paragraph">
<p>BIG-IP VE is a security services platform designed for delivering speed, availability, and security for business-critical applications and networks. As an aggregation tier for your application portfolio, you can use BIG-IP VE to standardize security, logging, and telemetry policies. It enables intelligent L4-L7 traffic management, robust network and web application firewalls, simplified application access, and much more. For more information about BIG-IP VE, navigate to the <a href="https://www.f5.com/" target="_blank" rel="noopener">F5 website</a>.</p>
</div>
<div class="paragraph">
<p>This Partner Solution deploys a highly available cluster of two BIG-IP VE instances provisioned with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><a href="https://www.f5.com/products/big-ip-services/local-traffic-manager" target="_blank" rel="noopener">Local Traffic Manager (LTM)</a></strong> - Performs uniform resource identifier (URI) routing, SSL encryption, TCP optimization, and automatic discovery of automatically scaled web applications.</p>
</li>
<li>
<p><strong><a href="https://www.f5.com/products/security/advanced-waf" target="_blank" rel="noopener">Application Security Manager (ASM)</a></strong> - A best of breed web application firewall to help protect against:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Automated attacks and bots</strong> - Automated attacks and bots that can overwhelm application resources.</p>
</li>
<li>
<p><strong>Credential theft</strong>  - Attacks that steal application credentials or take advantage of compromised accounts.</p>
</li>
<li>
<p><strong>Attacks on mobile clients</strong> - Bots that target browser-based and mobile clients.</p>
</li>
<li>
<p><strong>Application-layer attacks</strong> - Application-layer attacks that can evade signature and reputation-based security solutions.</p>
</li>
<li>
<p><strong>Web app and API attacks</strong> - New attack surfaces and threats due to the rapid adoption of APIs.</p>
</li>
<li>
<p><strong>Targeted attack campaigns</strong> - Active attack campaigns are difficult to detect from singular attacks.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_costs_and_licenses">Costs and licenses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Partner Solution requires a subscription to the Amazon Machine Image (AMI) for F5 BIG-IP Virtual Edition, which is available from <a href="https://aws.amazon.com/marketplace/" target="_blank" rel="noopener">AWS Marketplace</a>.</p>
</div>
<div class="paragraph">
<p>By default, this Partner Solution deploys <a href="https://aws.amazon.com/marketplace/pp/prodview-nlakutvltzij4" target="_blank" rel="noopener">F5 BIG-IP BEST with IPI and Threat Campaigns (PAYG, 25Mbps)</a> instances.</p>
</div>
<div class="paragraph">
<p>If you want to deploy other types of BIG-IP VE instances, accept the terms for the desired offering and obtain the AMI ID for that offering. For example, to get the list of BIG-IP VE AMI IDs in us-east-1, pass the desired AMI ID to the template&#8217;s <strong>bigIpImageId</strong> parameter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">aws ec2 describe-images --filters 'Name=name,Values=*BIGIP*' --query 'Images[*].[ImageId,Name]' --region us-east-1</code></pre>
</div>
</div>
<div class="paragraph">
<p>If deploying to a production environment, you can use Bring Your Own License (BYOL) instances (for example, <a href="https://aws.amazon.com/marketplace/pp/prodview-73utu5c5sfyyc" target="_blank" rel="noopener">F5 BIG-IP VE - ALL (BYOL, 2 Boot Locations)</a>), which require registration keys. If you don&#8217;t have registration keys, visit the <a href="https://www.f5.com/trials/big-ip-virtual-edition" target="_blank" rel="noopener">F5 website</a>. Additional pricing, terms, and conditions may apply.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_architecture">Architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Deploying this Partner Solution for a new virtual private cloud (VPC) with
default parameters builds the following BIG-IP VE environment in the
AWS Cloud.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/f5-big-ip-virtual-edition-architecture-diagram.png" alt="image" width="648" height="439">
</div>
</div>
<div class="paragraph">
<p>Figure 1: Partner Solution architecture for BIG-IP VE on AWS</p>
</div>
<div class="paragraph">
<p>As shown in Figure 1, the Partner Solution sets up the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A highly available architecture that spans two Availability Zones.*</p>
</li>
<li>
<p>A VPC configured with public and private subnets, according to AWS
best practices, to provide you with your own virtual network on AWS.*</p>
</li>
<li>
<p>In the public subnets:</p>
<div class="ulist">
<ul>
<li>
<p>Managed NAT gateways to allow outbound
internet access for resources in the private subnets.*</p>
</li>
<li>
<p>A Linux bastion host in an Auto Scaling group to allow inbound Secure
Shell (SSH) access to EC2 instances in public and private subnets.*</p>
</li>
<li>
<p>BIG-IP VE deployed to Amazon Elastic Compute Cloud (Amazon EC2) instances.</p>
</li>
</ul>
</div>
</li>
<li>
<p>In the private subnets:</p>
<div class="ulist">
<ul>
<li>
<p>An example application to help demonstrate BIG-IP VE functionality.</p>
</li>
<li>
<p>An elastic network interface that represents the public-facing network interface card (NIC) of a clustered pair of BIG-IP VE instances.</p>
</li>
</ul>
</div>
</li>
<li>
<p>AWS Identity and Access Management (IAM) for a role and EC2 instance profile.</p>
</li>
<li>
<p>An Amazon S3 SSE-S3 encrypted bucket used to provide failover state.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>*The template that deploys the Partner Solution into an existing VPC skips
the components marked by asterisks and prompts you for your existing VPC
configuration.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deployment_options">Deployment options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This Partner Solution provides the following deployment options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://fwd.aws/Y33pW" target="_blank" rel="noopener">Deploy BIG-IP VE into a new VPC</a>. This option builds a new AWS environment that consists of the VPC, subnets, NAT gateways, security groups, bastion hosts, and other infrastructure components. It then deploys BIG-IP VE into this new VPC.</p>
</li>
<li>
<p><a href="https://fwd.aws/Nv7A5" target="_blank" rel="noopener">Deploy BIG-IP VE into an existing VPC</a>. This option provisions BIG-IP VE in your existing AWS infrastructure.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This Partner Solution provides separate templates for these options. It also lets you configure Classless Inter-Domain Routing (CIDR) blocks, instance types, and BIG-IP VE settings.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_predeployment_steps">Predeployment steps</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_subscribe_to_the_big_ip_ve_ami">Subscribe to the BIG-IP VE AMI</h3>
<div class="paragraph">
<p>This Partner Solution requires a subscription to the AMI for BIG-IP VE in AWS Marketplace.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Sign in to your AWS account.</p>
</li>
<li>
<p><a href="https://aws.amazon.com/marketplace/pp/prodview-nlakutvltzij4" target="_blank" rel="noopener">Open the page for the BIG-IP VE AMI in AWS Marketplace</a>, and then choose <strong>Continue to Subscribe</strong>.</p>
</li>
<li>
<p>Review the terms and conditions for software usage, and then choose <strong>Accept Terms</strong>. A confirmation page loads, and an email confirmation is sent to the account owner. For detailed subscription instructions, see the <a href="https://aws.amazon.com/marketplace/help/200799470" target="_blank" rel="noopener">AWS Marketplace documentation</a>.</p>
</li>
<li>
<p>When the subscription process is complete, close out of AWS Marketplace without further action. Do not provision the software from AWS Marketplace, as the Partner Solution deploys the AMI for you.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_prepare_your_aws_account">Prepare your AWS account</h3>
<div class="paragraph">
<p>This Partner Solution requires:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The appropriate permission in AWS to launch AWS CloudFormation templates. You must be an IAM user with the Administrator Access policy attached and have permission to create the objects contained in this Partner Solution, including VPCs, Elastic IP addresses, EC2 instances, IAM roles and Instance Profiles, SSE-S3 encrypted S3 buckets, SSH Key Pairs, AWS Secrets Manager secrets, etc.</p>
</li>
<li>
<p>An SSH key pair in AWS for management access to BIG-IP VE. For more information about creating and/or importing the key pair in AWS, refer to <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html" target="_blank" rel="noopener">Amazon EC2 key pairs and Linux instances</a>. If one is not specified, one will be created for you named <code>BigIpSshKeyPair</code>.</p>
</li>
<li>
<p>An AWS secret stored in <a href="https://aws.amazon.com/secrets-manager/" target="_blank" rel="noopener">AWS Secrets Manager</a> with the password used to access and cluster the HA pair. If you don&#8217;t specify a secret, the solution creates one named <code>BigIpSecret</code> with an auto-generated password. To obtain the secret value, run the <a href="https://docs.aws.amazon.com/cli/latest/reference/secretsmanager/get-secret-value.html" target="_blank" rel="noopener">get-secret-value</a> AWS Command Line Interface (AWS CLI) command, changing the Region and secret name as needed:</p>
<div class="literalblock">
<div class="content">
<pre>aws secretsmanager get-secret-value --secret-id BigIpSecret --query "SecretString" --output text --region us-east-1</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, refer to the <a href="https://docs.aws.amazon.com/secretsmanager/latest/userguide/intro.html" target="_blank" rel="noopener">AWS Secrets Manager documentation</a>.</p>
</div>
<div class="paragraph">
<p>To update the password to your organization&#8217;s policy or requirements, refer to:
* <a href="https://support.f5.com/csp/article/K13121" target="_blank" rel="noopener">K13121: Changing system maintenance account passwords</a>.
* <a href="https://support.f5.com/csp/article/K15497" target="_blank" rel="noopener">K15497: Configuring a secure password policy for the BIG-IP system</a>.</p>
</div>
<div class="sect3">
<h4 id="_configuration_notes">Configuration notes</h4>
<div class="paragraph">
<p>The Partner Solution template provides an initial deployment for an infrastructure use case, which means that it doesn&#8217;t support managing the entire deployment exclusively via the template&#8217;s update-stack feature.</p>
</div>
<div class="paragraph">
<p>+
This Partner Solution uses the <code>cloud-init</code> package to send the instance user data, which is only used to provide an initial BIG-IP VE configuration and not as the primary configuration API for a long-running platform. You can use the update-stack feature to update certain cloud resources, however the BIG-IP VE configuration needs to align with cloud resources such as IPs and NICs. Therefore, updating one resource without the other can result in inconsistent states, while updating other resources, like the <strong>bigIpImageId</strong> or <strong>bigIpInstanceType</strong> parameters, can trigger an entire instance re-deloyment.</p>
</div>
<div class="paragraph">
<p>+
For example, to upgrade software versions, traditional in-place upgrades and configuration management are required. For details, refer to the <a href="#_support">Support</a> section.</p>
</div>
<div class="paragraph">
<p>This solution requires BIG-IP VE to have internet access to download the required software packages. If you are deploying this solution in a private subnet, configure a NAT gateway or instance to allow BIG-IP VE to access the internet. See the
<a href="#_security">Security</a> section for more information.</p>
</div>
<div class="paragraph">
<p>This solution uses <a href="https://clouddocs.f5.com/products/extensions/f5-cloud-failover/latest/" target="_blank" rel="noopener">Cloud Failover Extension (CFE)</a> to provide failover functionality. By default, this solution creates an S3 bucket for the F5 Cloud Failover Extension (CFE). The bucket is configured with AWS SSE-S3 encryption enabled, and the IAM role is set to enforce AES256 encryption. For more information, refer to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingServerSideEncryption.html" target="_blank" rel="noopener">Using server-side encryption with Amazon S3-managed encryption keys (SSE-S3)</a></p>
</li>
<li>
<p><a href="https://clouddocs.f5.com/products/extensions/f5-cloud-failover/latest/userguide/aws.html#aws-define-storage" target="_blank" rel="noopener">Define the Storage Account in AWS</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This template can send non-identifiable statistical information to F5 Networks to help improve templates. You can disable this functionality for this deployment by setting the the value of the <strong>allowUsageAnalytics</strong> input parameter to <strong>false</strong>, or you can disable it system-wide by setting the <strong>autoPhonehome</strong> system class property value to to <strong>false</strong> in the F5 Declarative Onboarding declaration. For more information, refer to the next section and also the <a href="#_security">Security</a> section.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_customize_the_big_ip_ve_configuration">Customize the BIG-IP VE configuration</h3>
<div class="paragraph">
<p>If needed, customize the BIG-IP VE configuration. The initial BIG-IP VE configurations are passed through the <a href="https://github.com/f5networks/f5-bigip-runtime-init" target="_blank" rel="noopener">F5 BIG-IP Runtime Init</a> configuration files. These files are the primary mechanisms to customize the initial BIG-IP VE configurations for your deployment. They also allow for large amounts of BIG-IP VE customizations. Customizing the BIG-IP VE configurations generally involves updating and rehosting these files and passing their location through the <strong>bigIpRuntimeInitConfig</strong> template parameters.</p>
</div>
<div class="paragraph">
<p>By default, the Partner Solution deploys a minimal 2NIC PAYG configuration into the default Partner Solution network topology using the following configuration files in this repo&#8217;s <a href="https://github.com/aws-quickstart/quickstart-f5-big-ip-virtual-edition-ha/tree/main/declarations" target="_blank" rel="noopener">/declarations</a> folder:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>runtime-init-conf-2nic-payg-instance01.yaml</code></p>
</li>
<li>
<p><code>runtime-init-conf-2nic-payg-instance02.yaml</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A minimal baseline HA failover cluster is deployed. No virtual services are provisioned.</p>
</div>
<div class="paragraph">
<p>Optionally, you can deploy an example web application firewall (WAF)-protected web service to illustrate how services work. The example application deploys web application instances and a WAF-protected virtual service on the BIG-IP VE instances. To deploy the example application, set the <strong>provisionExampleApp</strong> parameter to <strong>true</strong> and reference the following configuration files via the <strong>bigIpRuntimeInitConfig</strong> parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>runtime-init-conf-2nic-payg-instance01-with-app.yaml</code></p>
</li>
<li>
<p><code>runtime-init-conf-2nic-payg-instance02-with-app.yaml</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If your deployment requires additional customizations, update and rehost your configuration files at a custom URL.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<strong>IMPORTANT</strong> If hosting on GitHub, URLs that point to GitHub must use the raw file format (for example, <code>raw.githubusercontent.com</code>).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The BIG-IP VE configurations must match the external environment in which they are deployed. Although the provided runtime-init configuration examples extract and templatize many common values, some values are still hard-coded and must be updated to match your specific environment or deployment first.</p>
</div>
<div class="sect3">
<h4 id="_common_customization_example_1">Common customization example 1</h4>
<div class="paragraph">
<p>To deploy a Bring Your Own License (BYOL) instance, perform these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit or modify the Declarative Onboarding (DO) declaration in a
corresponding example <code>byol</code> runtime-init configuration file with the new <code>regKey</code>
value.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Example snippet:</p>
</div>
<div class="paragraph">
<p>From:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">...
          My_License:
            class: License
            licenseType: regKey
            regKey: REPLACE_WITH_VALID_REGKEY
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>To:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">...
          My_License:
            class: License
            licenseType: regKey
            regKey: AAAAA-BBBBB-CCCCC-DDDDD-EEEEEEE
...</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Publish or host the customized runtime-init configuration file at a location
that can be accessed by BIG-IP VE at deployment time (for example, Git, S3, etc.).</p>
</li>
<li>
<p>Update the <strong>bigIpRuntimeInitConfig</strong> input parameters to reference the
new URLs of the updated configurations.</p>
</li>
<li>
<p>Update the <strong>bigIpImageId</strong> input parameter to a valid BYOL image ID.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><br></p>
</div>
</div>
<div class="sect3">
<h4 id="_common_customization_example_2">Common customization example 2</h4>
<div class="paragraph">
<p>If you want to change host names, perform these steps to disable usage reporting to the BIG-IP VE NTP and DNS servers, etc.:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit or modify the DO declaration in a
corresponding example runtime-init configuration file with the new
values.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Example snippet:</p>
</div>
<div class="paragraph">
<p>From:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">...
          My_System:
            autoPhonehome: true
            class: System
            hostname: "failover01.local"
...
          failoverGroup:
            class: DeviceGroup
            type: sync-failover
            members:
              - failover01.local
              - failover02.local
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>To:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">...
          My_System:
            autoPhonehome: false
            class: System
            hostname: "bigip-cluster-01-a.yourcompany.com"
...
          failoverGroup:
            class: DeviceGroup
            type: sync-failover
            members:
              - bigip-cluster-01-a.yourcompany.com
              - bigip-cluster-01-b.yourcompany.com
...</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Publish or host the customized runtime-init configuration files at a location
that can be accessed by BIG-IP VE at deployment time (for example, Git, S3, etc.).</p>
</li>
<li>
<p>Update the <strong>bigIpRuntimeInitConfig</strong> input parameters to reference the
new URLs of the updated configurations.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><br>
<br></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For additional information and examples, refer to the <a href="https://github.com/f5networks/f5-bigip-runtime-init" target="_blank" rel="noopener">F5 BIG-IP Runtime Init</a> GitHub repository.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><br>
<br></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deployment_steps">Deployment steps</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Sign in to your AWS account, and launch this Partner Solution, as described under <a href="#_deployment_options">Deployment options</a>. The AWS CloudFormation console opens with a prepopulated template.</p>
</li>
<li>
<p>Choose the correct AWS Region, and then choose <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Create stack</strong> page, keep the default setting for the template URL, and then choose <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Specify stack details</strong> page, change the stack name if needed. Review the parameters for the template. Provide values for the parameters that require input. For all other parameters, review the default settings and customize them as necessary. When you finish reviewing and customizing the parameters, choose <strong>Next</strong>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Unless you&#8217;re customizing the Partner Solution templates or are instructed otherwise in this guide&#8217;s <strong>Predeployment</strong> section, don&#8217;t change the default settings for the following parameters: <code>QSS3BucketName</code>, <code>QSS3BucketRegion</code>, and <code>QSS3KeyPrefix</code>. Changing the values of these parameters will modify code references that point to the Amazon Simple Storage Service (Amazon S3) bucket name and key prefix. For more information, refer to the <a href="https://fwd.aws/NwqYA?" target="_blank" rel="noopener">AWS Partner Solutions Contributor&#8217;s Guide</a>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>On the <strong>Configure stack options</strong> page, you can <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html" target="_blank" rel="noopener">specify tags</a> (key-value pairs) for resources in your stack and <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-console-add-tags.html" target="_blank" rel="noopener">set advanced options</a>. When you finish, choose <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Review</strong> page, review and confirm the template settings. Under <strong>Capabilities</strong>, select all of the check boxes to acknowledge that the template creates AWS Identity and Access Management (IAM)  resources that might require the ability to automatically expand macros.</p>
</li>
<li>
<p>Choose <strong>Create stack</strong>. The stack takes about 30 minutes to deploy.</p>
</li>
<li>
<p>Monitor the stack&#8217;s status, and when the status is <strong>CREATE_COMPLETE</strong>, the F5 BIG-IP Virtual Edition deployment is ready.</p>
</li>
<li>
<p>To view the created resources, choose the <strong>Outputs</strong> tab.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_postdeployment_steps">Postdeployment steps</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_access_the_big_ip_ve_ip_address">Access the BIG-IP VE IP address</h3>
<div class="paragraph">
<p>After the stacks show a <strong>CREATE_COMPLETE</strong> status, you can access the BIG-IP VE instances through the bastion host. If you&#8217;ve provisioned the example application, optionally test the WAF service:</p>
</div>
<div class="paragraph">
<p>To access the parent template outputs, perform one of the following steps:
* If using the AWS Management Console, navigate to <strong>CloudFormation &gt; &lt;stack name&gt; &gt; Outputs</strong>.
* If using the AWS Command Line Interface (AWS CLI), run this command:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre>aws --region ${REGION} cloudformation describe-stacks --stack-name ${STACK_NAME}  --query  "Stacks[0].Outputs"</pre>
</div>
</div>
<div class="paragraph">
<p>To obtain the private IP address of the BIG-IP VE management port, perform one of the following steps:
* If using the AWS Management Console, navigate to <strong>CloudFormation &gt; &lt;stack name&gt; &gt; Outputs &gt; bigipInstance01MgmtPrivateIp</strong>.
* If using the AWS CLI, run this command:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre>aws --region ${REGION} cloudformation describe-stacks --stack-name ${STACK_NAME} --query  "Stacks[0].Outputs[ OutputKey=='bigipInstance01MgmtPrivateIp'].OutputValue" --output text</pre>
</div>
</div>
<div class="paragraph">
<p>To obtain the public IP address of the bastion host, perform one of the following steps:
* If using the AWS Management Console, navigate to <strong>CloudFormation &gt; &lt;stack name&gt; &gt; Outputs &gt; &lt;bastion host&gt;</strong>.
* If using the AWS CLI, run this command:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre>aws --region ${REGION} cloudformation describe-stacks --stack-name ${STACK_NAME} --query  "Stacks[0].Outputs[ OutputKey=='bastionHost'].OutputValue" --output text</pre>
</div>
</div>
<div class="sect3">
<h4 id="_ssh">SSH</h4>
<div class="paragraph">
<p>From your desktop client/shell, run this command to create an SSH tunnel. Replace the variables in brackets before running the command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ssh -i [keyname-passed-to-template.pem] -o ProxyCommand='ssh -i [keyname-passed-to-template.pem] -W %h:%p ec2-user@[BASTION-HOST-PUBLIC-IP]' admin@[BIG-IP-MGMT-PRIVATE-IP]</pre>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ssh -i ~/.ssh/mykey.pem -o ProxyCommand=`ssh -i ~/.ssh/mykey.pem -W %h:%p ec2-user@34.82.102.190' admin@10.0.1.11</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ssh_and_configuration_utility_webui">SSH and Configuration Utility (WebUI)</h4>
<div class="paragraph">
<p>To obtain the URL address of the BIG-IP VE management port, perform the following steps:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Multi-NIC environments use <a href="https://host" class="bare">https://host</a>, and single NIC environments use
<a href="https://host:8443" class="bare">https://host:8443</a>.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From your desktop client/shell, run this command to create an SSH tunnel through the bastion host:</p>
<div class="listingblock">
<div class="content">
<pre>ssh -i [keyname-passed-to-template.pem] ec2-user@[BASTION-HOST-PUBLIC-IP] -L [DESKTOP_PORT]:[BIG-IP-MGMT-PRIVATE-IP]:[BIGIP-GUI-PORT]</pre>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ssh -i ~/.ssh/mykey.pem ec2-user@34.82.102.190 -L 8443:10.0.1.11:443</pre>
</div>
</div>
</li>
<li>
<p>In a browser, navigate to the BIG-IP VE user interface:</p>
<div class="paragraph">
<p><a href="https://localhost:8443" class="bare">https://localhost:8443</a></p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default, the BIG-IP VE system’s WebUI starts with a self-signed
certificate. Follow your browser’s instructions for accepting self-signed certificates
For example, if using Firefox, select <strong>Advanced &gt; Accept Risk and Continue</strong>. If using Chrome, click inside the page and type <strong>thisisunsafe</strong>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Login credentials:
* User name: admin
* Password: &lt;your-AWS-secret&gt;</p>
</div>
</div>
<div class="sect3">
<h4 id="_ssh_2">SSH</h4>
<div class="paragraph">
<p>From TMOS Shell (tmsh), type <strong>bash</strong> and then press the Enter key to access the bash shell.</p>
</div>
<div class="paragraph">
<p>Examine the downloaded BIG-IP VE configuration file:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cat /config/cloud/runtime-init.conf</pre>
</div>
</div>
<div class="paragraph">
<p>Examine the running BIG-IP VE configurations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.f5.com/pdf/products/automation-toolchain-overview.pdf" target="_blank" rel="noopener">F5
Automation Toolchain</a> declarations include:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">curl -su admin: http://localhost:8100/mgmt/shared/declarative-onboarding | jq .
curl -su admin: http://localhost:8100/mgmt/shared/appsvcs/declare | jq .</code></pre>
</div>
</div>
</li>
<li>
<p><a href="https://clouddocs.f5.com/products/extensions/f5-cloud-failover/latest/" target="_blank" rel="noopener">Cloud
Failover Extension</a> declaration includes:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">curl -su admin: http://localhost:8100/mgmt/shared/cloud-failover/declare | jq .</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_webui">WebUI</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If you provisioned the example application, navigate to <strong>Virtual Services</strong>.</p>
</li>
<li>
<p>From the <strong>Partition</strong> menu in the upper-right corner of the screen, select <strong>Partition =
<code>Tenant_1</code></strong>.</p>
</li>
<li>
<p>Navigate to <strong>Local Traffic &gt; Virtual Servers</strong>. You should see the virtual services for HTTP and HTTPS, with both appearing as green. Select them to look at the configuration that&#8217;s declared in the
AS3 declaration.</p>
</li>
<li>
<p>Navigate to <strong>Security &gt; Application Security</strong>, and select the <strong>CustomWAFPolicy</strong> policy so you can inspect it.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_test_the_waf_service">Test the WAF service</h3>
<div class="paragraph">
<p>If you&#8217;ve provisioned the example application, perform the following steps to test the WAF service:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To obtain the address of the WAF service, perform one of the following steps:</p>
<div class="ulist">
<ul>
<li>
<p>If using the AWS Management Console, navigate to <strong>CloudFormation &gt; <em>&lt;STACK_NAME&gt;</em> &gt; Outputs &gt; applicationPublicIp</strong>.</p>
</li>
<li>
<p>If using the AWS CLI, run this command:</p>
<div class="listingblock">
<div class="content">
<pre>aws --region ${REGION}  cloudformation describe-stacks --stack-name ${STACK_NAME} --query  "Stacks[0].Outputs[?OutputKey=='applicationPublicIp'].OutputValue" --output text</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>To verify that the application is responding, paste the IP address in a browser: <code><a href="https://${IP_ADDRESS_FROM_OUTPUT}" class="bare">https://${IP_ADDRESS_FROM_OUTPUT}</a></code></p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default, the virtual service starts with a self-signed
certificate. Follow your browser’s instructions for accepting self-signed certificates
For example, if using Firefox, select <strong>Advanced &gt; Accept Risk and Continue</strong>. If using Chrome, click inside the page and type <strong>thisisunsafe</strong>.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>To use CURL:</p>
<div class="listingblock">
<div class="content">
<pre>curl -sko /dev/null -w '%{response_code}\n' https://${IP_ADDRESS_FROM_OUTPUT}</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Verify the WAF is configured to block illegal requests:</p>
<div class="listingblock">
<div class="content">
<pre>curl -sk -X DELETE https://${IP_ADDRESS_FROM_OUTPUT}</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The response should include a message that the request was blocked and a reference support ID, for example:</p>
<div class="listingblock">
<div class="content">
<pre>$ curl -sko /dev/null -w '%{response_code}\n' https://55.55.55.55
200
$ curl -sk -X DELETE https://55.55.55.55
&lt;html&gt;&lt;head&gt;&lt;title&gt;Request Rejected&lt;/title&gt;&lt;/head&gt;&lt;body&gt;The requested URL was rejected.
Please consult with your administrator.&lt;br&gt;&lt;br&gt;Your support ID is:
2394594827598561347&lt;br&gt;&lt;br&gt;&lt;a href='javascript:history.back();'&gt;[Go Back]&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_test_the_failover">Test the failover</h3>
<div class="paragraph">
<p>If you deployed the example application, perform the following steps to test the failover:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to the BIG-IP VE instances.</p>
</li>
<li>
<p>Perform the following steps:</p>
<div class="ulist">
<ul>
<li>
<p>If using the AWS Management Console, navigate to <strong>Device Management of Active Instance &gt; Traffic-Groups</strong>, and select the box next to <strong>traffic-group-1</strong>. Then select <strong>Force to Standby</strong>.</p>
</li>
<li>
<p>If using the BIG-IP VE command line, run this command:</p>
<div class="listingblock">
<div class="content">
<pre>tmsh run sys failover standby</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Verify that the Elastic IP address associated with the virtual service (applicationPublicIp) is remapped to the peer BIG-IP VE instance (for example, from 10.0.10.11 in Availability Zone 1 to 10.0.20.11 in Availability Zone 2).</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>To verify that the application is responding:</p>
<div class="ulist">
<ul>
<li>
<p>Paste the IP address in a browser: <code><a href="https://${IP_ADDRESS_FROM_OUTPUT}" class="bare">https://${IP_ADDRESS_FROM_OUTPUT}</a></code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default, the virtual service starts with a self-signed
certificate. Follow your browser’s instructions for accepting self-signed certificates
For example, if using Firefox, select <strong>Advanced &gt; Accept Risk and Continue</strong>. If using Chrome, click inside the page and type <strong>thisisunsafe</strong>.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Use CURL:</p>
<div class="listingblock">
<div class="content">
<pre>curl -sko /dev/null -w '%{response_code}\n' https://${IP_ADDRESS_FROM_OUTPUT}</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Verify the WAF is configured to block illegal requests:</p>
<div class="listingblock">
<div class="content">
<pre>curl -sk -X DELETE https://${IP_ADDRESS_FROM_OUTPUT}</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In this example, traffic uses Source Network Address Translation (SNAT). According to the example application, the client is the SNAT address. The real client IP is passed via the <code>x-forwarded-for:</code> header. Observe how the client IP address changes from one BIG-IP VE instance in one Availability Zone to the other.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_best_practices_for_using_big_ip_ve_on_aws">Best practices for using BIG-IP VE on AWS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For illustration purposes, this Partner Solution provides an option to pre-provision additional cloud resources (IP addresses)
needed for an example virtual service. However, in practice, it&#8217;s designed solely to facilitate the initial deployment as cloud-init runs once. It&#8217;s typically used for initial provisioning, not as the primary configuration API for a
long-running platform. More typically in an infrastructure use case,
virtual services are added after initial deployment, outside the lifecycle of this Cloudformation template.</p>
</div>
<div class="sect2">
<h3 id="_add_services_via_the_cloud">Add services via the cloud</h3>
<div class="paragraph">
<p>Provision additional IP addresses on the desired network interfaces. Refer to the following resources:
- <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/MultipleIP.html#ManageMultipleIP" target="_blank" rel="noopener">Assign a secondary private IPv4 address</a>
- <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html#using-instance-addressing-eips-allocating" target="_blank" rel="noopener">Allocate an Elastic IP address</a>
- <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html#using-instance-addressing-eips-associating" target="_blank" rel="noopener">Associate an Elastic IP address with an instance or network interface</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_add_services_via_big_ip_ve">Add services via BIG-IP VE</h3>
<div class="paragraph">
<p>Create virtual services that match the secondary IP addresses. Also update the AS3 declaration with additional virtual services. Refer to <a href="https://clouddocs.f5.com/products/extensions/f5-appsvcs-extension/latest/userguide/composing-a-declaration.html" target="_blank" rel="noopener">Composing an AS3 Declaration</a> for more information.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For cloud resources, templates can be created or customized to pre-provision
and update addtional resources (for example, various combinations of
NICs, IPs, public IPs, etc). Refer to the <a href="#_support">Support</a> section
for more information. For the BIG-IP VE configurations, use either REST or Automation Toolchain clients like
<a href="https://ansible.github.io/workshops/exercises/ansible_f5/3.0-as3-intro/" target="_blank" rel="noopener">Ansible</a> or <a href="https://registry.terraform.io/providers/F5Networks/bigip/latest/docs/resources/bigip_as3" target="_blank" rel="noopener">Terraform</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_delete_the_deployment">Delete the deployment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cloudformation doesn&#8217;t delete S3 buckets that contain data. To delete this deployment, manually empty and/or delete the S3 bucket created for the Cloud Failover Extension (provided via the <strong>cfeS3Bucket</strong> parameter). In the AWS Management Console, go to S3 and search for the <strong>cfeS3Bucket</strong> bucket name. Select the radio button associated with the bucket and select <strong>Empty</strong>.</p>
</div>
<div class="paragraph">
<p>You can now delete the deployment. Still in the AWS Management Console, open Cloudformation, go to <strong>Stacks</strong>, and select the radio button associated with the parent stack. Finally, select <strong>Empty</strong>.</p>
</div>
<div class="paragraph">
<p>For more information, refer to <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html" target="_blank" rel="noopener">Troubleshooting AWS CloudFormation</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security">Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This solution requires internet access for downloading additional F5 software components used for onboarding and configuring the BIG-IP VE instance (via GitHub.com). Internet access is required via
the management interface and then via a dataplane interface (for
example, external Self-IP) once a default route is configured. Refer to
<a href="https://support.f5.com/csp/article/K13284" target="_blank" rel="noopener">Overview of management interface routing</a> for
more details. By default, as a convenience, this Partner Solution provisions
public IP addresses to enable this, but in a production environment, outbound
access should be provided by a <code>routed</code> SNAT service (for example, NAT
gateway, custom firewall, etc).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Access via web proxy is not
currently supported. Other options include either (1) hosting the file locally
and modifying the runtime-init package URL and configuration files to
point to local URLs instead or (2) Baking them into a custom image, using
the <a href="https://clouddocs.f5.com/cloud/public/v1/ve-image-gen_index.html" target="_blank" rel="noopener">F5 BIG-IP Image Generation Tool</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Internet access is also required for contacting native cloud services (for example, s3.amazonaws.com, ec2.amazonaws.com, etc.) for various cloud integrations.</p>
</div>
<div class="sect2">
<h3 id="_onboarding">Onboarding</h3>
<div class="paragraph">
<p>Use <a href="https://github.com/f5networks/f5-bigip-runtime-init" target="_blank" rel="noopener">F5 BIG-IP Runtime
Init</a> to fetch secrets from native vault services.</p>
</div>
</div>
<div class="sect2">
<h3 id="_operation">Operation</h3>
<div class="paragraph">
<p>Use the following resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://clouddocs.f5.com/products/extensions/f5-appsvcs-extension/latest/" target="_blank" rel="noopener">F5 Application Services 3</a> for features like Service Discovery</p>
</li>
<li>
<p><a href="https://clouddocs.f5.com/products/extensions/f5-telemetry-streaming/latest/" target="_blank" rel="noopener">F5 Telemetry Streaming</a> for logging and reporting</p>
</li>
<li>
<p><a href="https://clouddocs.f5.com/products/extensions/f5-cloud-failover/latest/" target="_blank" rel="noopener">Cloud Failover Extension</a> for updating IP addresses and route mappings</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can use additional cloud services like <a href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints.html" target="_blank" rel="noopener">VPC endpoints</a> to address calls to native services traversing the internet. See the <a href="#_security">Security</a> section for more details.</p>
</div>
<div class="paragraph">
<p>The Partner Solution&#8217;s CloudFormation template downloads the following helper code to configure the
BIG-IP VE system:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>f5-bigip-runtime-init.gz.run: The self-extracting installer for the F5
BIG-IP Runtime Init RPM can be verified against a SHA256 checksum
provided as a release asset on the F5 BIG-IP Runtime Init public GitHub
repository, for example:
<a href="https://github.com/F5Networks/f5-bigip-runtime-init/releases/download/1.4.1/f5-bigip-runtime-init-1.4.1-1.gz.run.sha256" class="bare">https://github.com/F5Networks/f5-bigip-runtime-init/releases/download/1.4.1/f5-bigip-runtime-init-1.4.1-1.gz.run.sha256</a>.</p>
</li>
<li>
<p>F5 BIG-IP Runtime Init: The self-extracting installer script extracts,
verifies, and installs the F5 BIG-IP Runtime Init RPM package. Package
files are signed by F5 and automatically verified using GPG.</p>
</li>
<li>
<p>F5 Automation Toolchain components: F5 BIG-IP Runtime Init downloads,
installs, and configures the F5 Automation Toolchain components.
Although optional, F5 recommends adding the <strong>extensionHash</strong> field to
each extension installation operation in the configuration file. This field triggers verification of the downloaded component package
checksum against the provided value. The checksum values are published
as release assets on each extension’s public GitHub repository, for
example:
<a href="https://github.com/F5Networks/f5-appsvcs-extension/releases/download/v3.30.0/f5-appsvcs-3.30.0-5.noarch.rpm.sha256" class="bare">https://github.com/F5Networks/f5-appsvcs-extension/releases/download/v3.30.0/f5-appsvcs-3.30.0-5.noarch.rpm.sha256</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following configuration file verifies the DO
and application services extensions before configuring AS3 from a local
file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">runtime_parameters: []
extension_packages:
    install_operations:
        - extensionType: do
          extensionVersion: 1.23.0
          extensionHash: bfe88c7cf3fdb24adc4070590c27488e203351fc808d57ae6bbb79b615d66d27
        - extensionType: as3
          extensionVersion: 3.30.0
          extensionHash: 47cc7bb6962caf356716e7596448336302d1d977715b6147a74a142dc43b391b
extension_services:
    service_operations:
      - extensionType: as3
        type: url
        value: file:///examples/declarations/as3.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about F5 BIG-IP Runtime Init and additional examples, refer to the <a href="https://github.com/F5Networks/f5-bigip-runtime-init/blob/main/README.md" target="_blank" rel="noopener">GitHub repository</a>.</p>
</div>
<div class="paragraph">
<p>This template can send non-identifiable statistical information to F5 Networks to help improve templates. You can disable this functionality for this deployment by setting the value of the <strong>allowUsageAnalytics</strong> input parameter to <strong>false</strong>, or you can disable it system-wide by setting the <strong>autoPhonehome</strong> system class property value to <strong>false</strong> in the F5 Declarative Onboarding declaration. Refer to the <a href="#_customize_the_big_ip_ve_configuration">Customizing the BIG-IP Configuration</a> section for more information.</p>
</div>
<div class="paragraph">
<p>BIG-IP VE may contact the following list of endpoints during onboarding:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>BIG-IP VE image default:</p>
<div class="ulist">
<ul>
<li>
<p>vector2.brightcloud.com (by BIG-IP VE image for
<a href="https://support.f5.com/csp/article/K03011490" target="_blank" rel="noopener">IPI subscription validation</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Solution/onboarding:</p>
<div class="ulist">
<ul>
<li>
<p>github.com (for downloading helper packages mentioned earlier)</p>
</li>
<li>
<p>f5-cft.s3.amazonaws.com (downloading GPG Key and other helper configuration files)</p>
</li>
<li>
<p>license.f5.com (licensing functions)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Telemetry:</p>
<div class="ulist">
<ul>
<li>
<p>product-s.apis.f5.com.</p>
</li>
<li>
<p>f5-prod-webdev-prod.apigee.net.</p>
</li>
<li>
<p>id-prod-global-endpoint.trafficmanager.net.</p>
</li>
<li>
<p>global.azure-devices-provisioning.net.</p>
</li>
<li>
<p>www-google-analytics.l.google.com</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_troubleshooting">Troubleshooting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For troubleshooting common Partner Solution issues, refer to the <a href="https://fwd.aws/rA69w?" target="_blank" rel="noopener">AWS Partner Solution General Information Guide</a> and <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html" target="_blank" rel="noopener">Troubleshooting CloudFormation</a>.</p>
</div>
<div class="paragraph">
<p>The following issues are most common:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The entire stack was not created</p>
</li>
<li>
<p>Resource(s) within the stack failed to deploy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If a CloudFormation template in the stack failed, choose the name of the failed stack and then choose <strong>Events</strong>. Check the <strong>Status Reason</strong> column for details about the cause of the failed event.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When creating a GitHub issue for a failed template, include as much information as possible from the stack event.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Common causes of deployment failure include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Required fields were left empty or contained incorrect values (for example, an input type mismatch, prohibited characters, etc.), causing template validation failure.</p>
</li>
<li>
<p>Insufficient permissions to create the deployment or resources created by a deployment (for example, IAM roles, etc).</p>
</li>
<li>
<p>Resource limitations (for example, exceeded limit of IP addresses or compute resources, etc.).</p>
</li>
<li>
<p>An AWS service issue. To check service health, visit the <a href="https://status.aws.amazon.com/" target="_blank" rel="noopener">AWS service health dashboard</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If all stacks were created successfully, but the BIG-IP VE or AWS service is unavailable, log in to the BIG-IP VE instance via SSH to confirm the BIG-IP VE deployment or configuration update was successful. For example, you can check that the startup scripts completed as expected on BIG-IP VE. To verify BIG-IP VE deployment, perform the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Obtain the IP address of the BIG-IP VE instance. To learn more, refer to <a href="#_support">Access the BIG-IP VE IP address*</a>.</p>
</li>
<li>
<p>Check the startup script to make sure it was installed/interpolated correctly:
<code><code>cat /opt/cloud/instance/user-data.txt</code></code></p>
</li>
<li>
<p>Check the logs (in order of invocation):</p>
<div class="ulist">
<ul>
<li>
<p>cloud-init logs:</p>
<div class="ulist">
<ul>
<li>
<p><strong>/var/log/boot.log</strong></p>
</li>
<li>
<p><strong>/var/log/cloud-init.log</strong></p>
</li>
<li>
<p><strong>/var/log/cloud-init-output.log</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p>runtime-init logs:</p>
<div class="ulist">
<ul>
<li>
<p><strong>/var/log/cloud/startup-script.log</strong>: Contains events that happen prior to running <code>f5-bigip-runtime-init</code>. For example, if the files required by the deployment fail to download, those events are logged here.</p>
</li>
<li>
<p><strong>/var/log/cloud/bigIpRuntimeInit.log</strong>: Contains events logged by the <code>f5-bigip-runtime-init</code> onboarding utility. If the configuration is invalid, causing onboarding to fail, those events are logged here. If deployment is successful, you will see an <strong>All operations completed successfully</strong> event.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Automation tool chain logs:</p>
<div class="ulist">
<ul>
<li>
<p><strong>/var/log/restnoded/restnoded.log</strong>: Contains events logged by the F5 Automation Toolchain components. If an Automation Toolchain declaration fails to deploy, the details of those events are logged here.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Search most critical errors first (for example, <code>egrep -i err /var/log/&lt;Logname&gt;</code>).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you can&#8217;t log in to the BIG-IP VE instance, navigate to <strong>EC2 &gt; Instances</strong>, select the check box next to the instance you want to troubleshoot, and then choose <strong>Actions &gt; Monitor and Troubleshoot &gt; Get System Log</strong> or <strong>Get Instance Screenshot</strong> for potential logging to serial console.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">aws ec2 get-console-output --region ${REGION}  --instance-id &lt;ID&gt;</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_support">Support</h3>
<div class="paragraph">
<p>Due to the heavy customization requirements of external cloud resources and BIG-IP VE configurations, F5 does not provide technical support for deploying, customizing, or troubleshooting CloudFormation templates. However, the various underlying products and components used in the deployed Partner Solution such as <a href="https://clouddocs.f5.com/cloud/public/v1/" target="_blank" rel="noopener">BIG-IP Virtual Edition</a>, <a href="https://github.com/F5Networks/f5-bigip-runtime-init" target="_blank" rel="noopener">F5 BIG-IP Runtime Init</a>, <a href="https://www.f5.com/pdf/products/automation-toolchain-overview.pdf" target="_blank" rel="noopener">F5 Automation Toolchain</a> extensions, and <a href="https://clouddocs.f5.com/products/extensions/f5-cloud-failover/latest/" target="_blank" rel="noopener">F5 Cloud Failover</a> are supported by F5 and can be deployed with other orchestration tools. To learn more, refer to <a href="https://www.f5.com/company/policies/support-policies" target="_blank" rel="noopener">Support Policies</a>. For problems with the templates deployed as-is, report a GitHub issue.</p>
</div>
<div class="paragraph">
<p>For help with authoring and support for custom templates, engage with <a href="https://www.f5.com/services/professional-services" target="_blank" rel="noopener">F5 Professional Services</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_resources">Resources</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.f5.com/">F5 website</a></p>
</li>
<li>
<p><a href="https://aws.amazon.com/marketplace/pp/prodview-v2lgyijcawiti">F5 BIG-IP Virtual Edition - BEST (PAYG, 25Mbps)</a></p>
</li>
<li>
<p><a href="https://aws.amazon.com/marketplace/pp/prodview-73utu5c5sfyyc">F5 BIG-IP VE - ALL (BYOL, 2 Boot Locations)</a></p>
</li>
<li>
<p><a href="https://www.f5.com/products/big-ip-services/local-traffic-manager">Local Traffic Manager (LTM)</a></p>
</li>
<li>
<p><a href="https://www.f5.com/products/security/advanced-waf">Application Security Manager (ASM)</a></p>
</li>
<li>
<p><a href="https://aws.amazon.com/marketplace/pp/prodview-cs4qijwjf3ijs">F5 Advanced WAF with LTM, IPI, and Threat Campaigns (PAYG, 25Mbps)</a></p>
</li>
<li>
<p><a href="https://github.com/f5networks/f5-bigip-runtime-init">F5 BIG-IP Runtime Init</a> - to fetch secrets from cloud vault services</p>
</li>
<li>
<p><a href="https://clouddocs.f5.com/products/extensions/f5-cloud-failover/latest/">F5 Cloud Failover Extension (CFE)</a> &#8594; for updating cloud resources (IP and route mappings)</p>
</li>
<li>
<p><a href="https://www.f5.com/pdf/products/automation-toolchain-overview.pdf"> F5 Automation Tool Chain</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://clouddocs.f5.com/products/extensions/f5-declarative-onboarding/latest/">F5 Declarative Onboarding (DO)</a> - for system onboarding</p>
</li>
<li>
<p><a href="https://clouddocs.f5.com/products/extensions/f5-appsvcs-extension/latest/">F5 Application Services 3 (AS3)</a> - declarative virtual service definitions</p>
</li>
<li>
<p><a href="https://clouddocs.f5.com/products/extensions/f5-telemetry-streaming/latest/">F5 Telemetry Streaming (TS)</a> - for logging and reporting (not deployed by default in this solution )</p>
</li>
<li>
<p><a href="https://github.com/f5devcentral/f5-demo-httpd">Example Application (nginx)</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://www.f5.com/services/certification">F5 Certification</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_customer_responsibility">Customer responsibility</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After you deploy a Partner Solution, confirm that your resources and services are updated and configured—including any required patches—to meet your security and other needs. For more information, refer to the <a href="https://aws.amazon.com/compliance/shared-responsibility-model/" target="_blank" rel="noopener">Shared Responsibility Model</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_feedback">Feedback</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To submit feature ideas and report bugs, use the <strong>Issues</strong> section of the <a href="https://github.com/aws-ia/cfn-ps-f5-big-ip-virtual-edition-ha" target="_blank" rel="noopener">GitHub repository</a> for this Partner Solution. To submit code, refer to the <a href="https://fwd.aws/NwqYA?" target="_blank" rel="noopener">Partner Solution Contributor&#8217;s Guide</a>. To submit feedback on this deployment guide, use the following GitHub links:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/aws-ia/cfn-ps-f5-big-ip-virtual-edition-ha/issues/new?labels=documentation,grammar+or+spelling&amp;title=Deployment+guide+feedback&amp;body=Section+heading:%0ADocumentation+issue+description:%0A" target="_blank" rel="noopener">Grammar or spelling</a></p>
</li>
<li>
<p><a href="https://github.com/aws-ia/cfn-ps-f5-big-ip-virtual-edition-ha/issues/new?labels=documentation,broken+link&amp;title=Deployment+guide+feedback&amp;body=Section+heading:%0ADocumentation+issue+description:%0A" target="_blank" rel="noopener">Broken link</a></p>
</li>
<li>
<p><a href="https://github.com/aws-ia/cfn-ps-f5-big-ip-virtual-edition-ha/issues/new?labels=documentation,inaccurate+content&amp;title=Deployment+guide+feedback&amp;body=Section+heading:%0ADocumentation+issue+description:%0A" target="_blank" rel="noopener">Inaccurate content</a></p>
</li>
<li>
<p><a href="https://github.com/aws-ia/cfn-ps-f5-big-ip-virtual-edition-ha/issues/new?labels=documentation,display+and+design&amp;title=Deployment+guide+feedback&amp;body=Section+heading:%0ADocumentation+issue+description:%0A" target="_blank" rel="noopener">Display or design</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notices">Notices</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document is provided for informational purposes only. It represents current AWS product offerings and practices as of the date of issue of this document, which are subject to change without notice. Customers are responsible for making their own independent assessment of the information in this document and any use of AWS products or services, each of which is provided "as is" without warranty of any kind, whether expressed or implied. This document does not create any warranties, representations, contractual commitments, conditions, or assurances from AWS, its affiliates, suppliers, or licensors. The responsibilities and liabilities of AWS to its customers are controlled by AWS agreements, and this document is not part of, nor does it modify, any agreement between AWS and its customers.</p>
</div>
<div class="paragraph">
<p>The software included with this paper is licensed under the Apache License, version 2.0 (the "License"). You may not use this file except in compliance with the License. A copy of the License is located at <a href="https://aws.amazon.com/apache2.0/" target="_blank" rel="noopener">https://aws.amazon.com/apache2.0/</a> or in the accompanying "license" file. This code is distributed on an "as is" basis, without warranties or conditions of any kind, either expressed or implied. Refer to the License for specific language governing permissions and limitations.</p>
</div>
</div>
</div>
</div>
<footer>
    <p class="footer-text">
        <!-- We can use document attributes: -->
        <!-- Generated with Asciidoctor v2.0.20. -->
        <a href="https://aws.amazon.com/privacy/">Privacy</a> | <a href="https://aws.amazon.com/terms/">Site terms</a> |
        &copy; {current-year}, Amazon Web Services, Inc. or its affiliates and F5. All rights reserved.
    </p>
</footer>
</body>
</html>